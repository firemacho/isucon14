# 管理対象追加手順

初期状態では、nginx及びmysqlの設定ファイルやソースコードなど、一部のファイルのみをgitの管理対象としている。<br>
これらに加えて他のミドルウェアやファイルを管理対象に追加する場合、どのような手順を踏めばよいか記述する。

## 1. ホームディレクトリ配下へのファイルのコピー
管理したい対象ファイルが/etc配下などホームディレクトリ配下以外の部分にある場合、git管理を行うためにホームディレクトリ配下の各サーバディレクトリにコピーして持ってくる必要がある<br>
★ いちいちコピーしないといけないの面倒なのでできれば改善したい
- `Makefile` で新しくget-xxx-confを作成し、各サーバで `make get-xxx-conf` を実行する
- 必要に応じて `.gitignore` を編集するのを忘れずに
- また、編集内容がサーバに適用されるよう、 `Makefile` で新しくdeploy-xxx-confを作成し、deploy-confに追加する

管理したい対象ファイルがホームディレクトリ配下にある場合は、単に.gitignoreを設定した上でpushするだけでOK

## 2. サービスの追加
ミドルウェアを追加する場合などは、新しくそのサービスの起動・停止処理などをスクリプトで実行させたい<br>
そのためには、以下のような箇所を修正すると良い
- `Makefile` の stop, restartへのコマンド追加
- `Makefile` の start-xxxの作成
- `Makefile` の mv-logsへのコマンド追加（必要に応じて）
- `config.sh` の SERVER_SERVICESへのサービス追加
- `before-bench.sh`, `after-bench.sh` のcase文へサービスに対応する処理を追加
- `profile.sh` への処理追加（必要に応じて）
